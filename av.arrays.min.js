(function(){var c=Array.prototype;c.isSolid=function(){return this.every(function(a){return void 0!==a&&"undefined"!==a&&void 0!==a&&null!==a})};c.solid=function(){return this.filter(function(a){return void 0!==a&&"undefined"!==a&&void 0!==a&&null!==a})};c.isNaN=function(){return this.some(function(a){return isNaN(a)})};c.unique=function(){return this.filter(function(a,b,d){return 0>d.indexOf(a,b+1)})};c.OR=function(a){a=this.concat(a).unique();return a.isNaN()?a.solid().sort():a.solid().sort(function(a,
d){return a-d})};c.AND=function(a){var b=this.filter(function(b){return-1<a.indexOf(b)}).unique();return b.isNaN()?b.solid().sort():b.solid().sort(function(a,b){return a-b})};c.XOR=function(a){return this.filter(function(b){return 0>a.indexOf(b)}).unique().OR(a.filter(function(a){return 0>this.indexOf(a)},this).unique())};c.min=function(){return this.isNaN()?this.solid().sort()[0]:Math.min.apply(Math,this.solid())};c.max=function(){return this.isNaN()?this.solid().sort().reverse()[0]:Math.max.apply(Math,
this.solid())};c.range=function(){return[this.min(),this.max()]};c.sum=function(){return this.solid().reduce(function(a,b){return a+b})};c.stack=function(){return this.map(function(a,b){return this.reduce(function(a,c,e){return a+(e<=b?c:0)})},this)};c.module=function(){return Math.sqrt(this.solid().reduce(function(a,b){return a+b*b},0))};c.normalize=function(){var a=this.module();return 0!=a?this.map(function(b,c){return b/a}):null};c.mean=function(a){var b=this.solid(),c=b.length;return 0==c?null:
0==a?Math.pow(b.reduce(function(a,b){return a*b}),1/c):Math.pow(b.reduce(function(b,c){return b+Math.pow(c,a)},0)/c,1/a)};c.median=function(){return this.P(50)};c.freq=function(){return this.reduce(function(a,b){a[b]=a[b]+1||1;return a},{})};c.mode=function(){var a=this.freq(),b=Math.max.apply(Math,Object.keys(a).map(function(b){return a[b]}));return Object.keys(a).filter(function(c){return a[c]==b}).map(function(a){return isNaN(a)?a:1*a})};c.P=function(a){var b=this.isNaN()?this.solid().sort():this.solid().sort(function(a,
b){return a-b}),c=Math.floor(b.length*a/100);return 0==b.length*a%100?(b[c-1]+b[c])/2:b[c]};c.pvariance=function(){var a=this.solid(),b=this.mean(1);return 2>a.length?null:a.reduce(function(a,c){return a+Math.pow(c-b,2)},0)/a.length};c.variance=function(){var a=this.solid(),b=this.mean(1);return 2>a.length?null:a.reduce(function(a,c){return a+Math.pow(c-b,2)},0)/(a.length-1)};c.covariance=function(a){return this.length!=a.length?null:this.map(function(b,c){return b*a[c]}).mean(1)-this.mean(1)*a.mean(1)};
c.pstdDev=function(){var a=this.pvariance();return null!=a?Math.sqrt(a):null};c.stdDev=function(){var a=this.variance();return null!=a?Math.sqrt(a):null};c.correlation=function(a){var b=this.variance();return null==b||0==b||0==a.variance?null:this.covariance(a)/(b*a.variance())};c.CV=function(){return 0!=this.mean(1)?this.stdDev()/this.mean(1):null};c.skew=function(){var a=this.solid(),b=this.mean(1),a=a.map(function(a){return Math.pow(a-b,3)});return 0!=this.stdDev()?a.mean(1)/Math.pow(this.stdDev(),
3):null};c.kurtosis=function(){var a=this.solid(),b=this.mean(1),a=a.map(function(a){return Math.pow(a-b,4)});return 0!=this.stdDev()?a.mean(1)/Math.pow(this.stdDev(),4)-3:null}})();
